FROM nginx:latest

ARG APP_HOST
ARG APP_PORT

RUN echo "server { \n \
    listen 80; \n \
    location / { \n \
        proxy_set_header X-Real-IP \$remote_addr; \n \
        proxy_pass http://$APP_HOST:$APP_PORT; \n \
    } \n \
}" > /etc/nginx/conf.d/default.conf



events {
}

http {
  server {
      listen 80;

      location / {
          proxy_pass http://app:5000;
          proxy_set_header X-Real-IP $remote_addr;
      }
  }
}


#server {
#    listen 80;
#
#    location / {
#        proxy_pass http://flask:8000;
#        proxy_set_header Host $host;
#        proxy_set_header X-Real-IP $remote_addr;
#        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#    }
#}

j